(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(1374)}])},1374:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return J}});var n,s,l,r,i=a(5893),o=a(3465),c=a.n(o),m=a(9008),d=a.n(m),h=a(7294);(n=l||(l={}))[n.SAC=0]="SAC",n[n.PRICE=1]="PRICE";class u{constructor(e,t,a,n,s,l,r,i,o,c,m){this.grossPay=e,this.hasFGTS=t,this.extraExpenses=a,this.mortgageType=n,this.annualPayments=s,this.monthlyPayments=l,this.value=r,this.annualInterestRate=i,this.numberOfMonths=o,this.initialFunds=c,this.downPayment=m}}let x=e=>{let{submitMortgageParams:t}=e,a={admFee:25,hasFGTS:!1,insurance:60.78,downPayment:0,minDownPayment:0,mortgageType:l.PRICE,monthlyPayments:0,annualPayments:0,numberOfMonths:1,interest:9.6239,assetValue:0,grossPay:0,initialFunds:0},[n,s]=(0,h.useState)(a),r=e=>{let{name:t,type:a,value:l}=e.target,r=e.target.checked,i={...n,[t]:"checkbox"===a?r:l};"assetValue"===t&&(i.minDownPayment=i.assetValue/5),s(i)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(new u(n.grossPay,n.hasFGTS,n.insurance+n.admFee,n.mortgageType,n.annualPayments,n.monthlyPayments,n.assetValue,n.interest,n.numberOfMonths,n.initialFunds,n.downPayment))},children:[(0,i.jsxs)("fieldset",{children:[(0,i.jsx)("legend",{children:"Sobre o bem"}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"col",children:[(0,i.jsx)("label",{htmlFor:"assetValue",className:"form-label",children:"Valor do bem"}),(0,i.jsx)("input",{type:"number",className:"form-control",id:"assetValue",min:"0",step:"0.01",onChange:r,name:"assetValue",value:n.assetValue,required:!0})]}),(0,i.jsxs)("div",{className:"col",children:[(0,i.jsx)("label",{htmlFor:"downPayment",className:"form-label",children:"Valor de entrada"}),(0,i.jsx)("input",{type:"number",min:n.minDownPayment,step:"0.01",className:"form-control",id:"downPayment","aria-describedby":"minDownPayment",name:"downPayment",onChange:r,value:n.downPayment,required:!0}),(0,i.jsx)("div",{id:"minDownPayment",className:"form-text",children:"Entrada deve ser de pelo menos 20% do valor do bem."})]})]})]}),(0,i.jsxs)("fieldset",{children:[(0,i.jsx)("legend",{children:"Sobre quem est\xe1 financiando"}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"col",children:[(0,i.jsx)("label",{htmlFor:"grossPay",className:"form-label",children:"Renda Bruta"}),(0,i.jsx)("input",{type:"number",className:"form-control",id:"grossPay",min:"0",step:"0.01","aria-describedby":"maxInstallment",name:"grossPay",onChange:r,value:n.grossPay,required:!0}),(0,i.jsx)("div",{id:"maxInstallment",className:"form-text",children:"Parcela n\xe3o pode comprometer mais que 30% da renda bruta."})]}),(0,i.jsx)("div",{className:"col",children:(0,i.jsxs)("fieldset",{children:[(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col-md-2",children:(0,i.jsx)("legend",{children:"FGTS"})}),(0,i.jsx)("div",{className:"col",children:(0,i.jsxs)("div",{className:"form-check",children:[(0,i.jsx)("input",{className:"form-check-input",type:"checkbox",id:"hasFGTS",onChange:r,checked:n.hasFGTS,name:"hasFGTS"}),(0,i.jsx)("label",{className:"form-check-label",htmlFor:"hasFGTS",children:"Recebe FGTS"})]})})]}),(0,i.jsx)("div",{className:"row",children:(0,i.jsxs)("div",{className:"col offset-md-2",children:[(0,i.jsx)("label",{htmlFor:"fgtsFunds",className:"form-label",children:"Saldo FGTS atual"}),(0,i.jsx)("input",{type:"number",className:"form-control",id:"fgtsFunds",min:"0",step:"0.01",disabled:!n.hasFGTS,onChange:r,name:"initialFunds",value:n.initialFunds})]})})]})})]})]}),(0,i.jsxs)("fieldset",{children:[(0,i.jsx)("legend",{children:"Sobre o financiamento"}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"col",children:[(0,i.jsx)("label",{htmlFor:"mortgageTable",className:"form-label",children:"Selecione o sistema de amortiza\xe7\xe3o"}),(0,i.jsxs)("select",{className:"form-select","aria-label":"Selecione o sitema de amortiza\xe7\xe3o",id:"mortgageTable",value:n.mortgageType,onChange:r,name:"mortgageTable",children:[(0,i.jsx)("option",{value:l.PRICE,children:"PRICE - Parcela fixa"}),(0,i.jsx)("option",{value:l.SAC,children:"SAC - Parcela diminui ao longo do tempo"})]})]}),(0,i.jsxs)("div",{className:"col",children:[(0,i.jsx)("label",{htmlFor:"interest",className:"form-label",children:"Juros nominais (%)"}),(0,i.jsx)("input",{type:"number",className:"form-control",id:"interest",min:"0",step:"any",name:"interest",value:n.interest,onChange:r,required:!0})]})]}),(0,i.jsx)("br",{}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"col",children:[(0,i.jsx)("label",{htmlFor:"numberOfMonths",className:"form-label",children:"Prazo (em meses)"}),(0,i.jsx)("input",{type:"number",className:"form-control",id:"numberOfMonths",min:"0",step:"1",name:"numberOfMonths",value:n.numberOfMonths,onChange:r,max:"420",required:!0})]}),(0,i.jsxs)("div",{className:"col",children:[(0,i.jsx)("label",{htmlFor:"insurance",className:"form-label",children:"Seguro"}),(0,i.jsx)("input",{type:"number",className:"form-control",id:"insurance",min:"0",step:"0.01",value:n.insurance,onChange:r,name:"insurance",required:!0})]}),(0,i.jsxs)("div",{className:"col",children:[(0,i.jsx)("label",{htmlFor:"insurance",className:"form-label",children:"Taxa de Admnistra\xe7\xe3o"}),(0,i.jsx)("input",{type:"number",className:"form-control",id:"insurance",min:"0",step:"0.01",value:n.admFee,onChange:r,name:"admFee",required:!0})]})]})]}),(0,i.jsx)("br",{}),(0,i.jsxs)("fieldset",{children:[(0,i.jsx)("legend",{children:"Sobre o pagamento"}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsxs)("div",{className:"col",children:[(0,i.jsx)("label",{htmlFor:"monthlyAmortization",className:"form-label",children:"Pagamento adicional mensal"}),(0,i.jsx)("input",{type:"number",className:"form-control",id:"monthlyAmortization",min:"0",step:"0.01",value:n.monthlyPayments,onChange:r,name:"monthlyPayments",required:!0})]}),(0,i.jsxs)("div",{className:"col",children:[(0,i.jsx)("label",{htmlFor:"annualAmortization",className:"form-label",children:"Pagamento adicional anual"}),(0,i.jsx)("input",{type:"number",className:"form-control",id:"annualAmortization",min:"0",step:"0.01",value:n.annualPayments,name:"annualPayments",onChange:r,required:!0}),(0,i.jsx)("div",{id:"annualAmortizationExplained",className:"form-text",children:"Uma vez ao ano, se soma o valor mensal ao anual"})]})]})]}),(0,i.jsx)("br",{}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Calcular"})]}),(0,i.jsx)("br",{})]})},j=e=>parseFloat(e.toFixed(2)),f=(e,t)=>Math.max(0,j(e-t)),b=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}),p=e=>b.format(e).replace(/\s/g," "),y=e=>b.format(e),g=e=>{let{report:t}=e,a=null==t?void 0:t.payments,n=null==a?void 0:a.map((e,t)=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.installmentDate.toLocaleDateString("pt-BR")}),(0,i.jsx)("td",{children:y(e.savingsWithdrawal)}),(0,i.jsx)("td",{children:y(e.cashPayment)}),(0,i.jsx)("td",{children:y(e.installment)}),(0,i.jsx)("td",{children:y(e.interest)}),(0,i.jsx)("td",{children:y(e.amortization)}),(0,i.jsx)("td",{children:y(e.balance)})]},t)),s=(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("h1",{hidden:null===t,className:"text-center",children:["\xc9 poss\xedvel pagar o financiamento em ",(0,i.jsxs)("mark",{children:[null==a?void 0:a.length," meses"]})]}),(0,i.jsx)("br",{})]});return(0,i.jsxs)(i.Fragment,{children:[s,(0,i.jsxs)("table",{className:"table table-striped table-bordered",children:[(0,i.jsx)("thead",{className:"text-center",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",children:"Data"}),(0,i.jsx)("th",{scope:"col",children:"Saque FGTS"}),(0,i.jsx)("th",{scope:"col",children:"Pagamento em dinheiro"}),(0,i.jsx)("th",{scope:"col",children:"Presta\xe7\xe3o"}),(0,i.jsx)("th",{scope:"col",children:"Juros"}),(0,i.jsx)("th",{scope:"col",children:"Amortiza\xe7\xe3o"}),(0,i.jsx)("th",{scope:"col",children:"Saldo devedor"})]})}),(0,i.jsx)("tbody",{className:"text-center",children:n})]})]})};(s=r||(r={}))[s.EndOfPeriod=0]="EndOfPeriod",s[s.BeginningOfPeriod=1]="BeginningOfPeriod";let v=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(0===e)return-(a+n)/t;let l=Math.pow(1+e,t),r=-e*(a*l+n)/(l-1);return 1===s?r/(1+e):r},w=e=>Math.pow(1+e,1/12)-1,P=e=>e/100,N=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return e.setMonth(e.getMonth()+1,1),e.setHours(0,0,0,0),e},F=(e,t,a)=>j(v(t,a,-e)),S=(e,t)=>j(e*t);class C{constructor(e,t,a){this.interest=e,this.amortization=t,this.interest=e,this.amortization=t,this.total=j(e+t+a)}}class T{calculate(e){if(e>0){let t=S(e,this.interestRate);return new C(t,j(this.installment-t),this.extraExpenses)}return new C(0,0,0)}constructor(e,t,a,n){this.interestRate=w(t),this.installment=F(e,this.interestRate,a),this.extraExpenses=j(n)}}class E{calculate(e){return e>0?new C(S(e,this.interestRate),Math.min(this.monthlyAmortization,e),this.extraExpenses):new C(0,0,0)}constructor(e,t,a,n){this.interestRate=w(t),this.monthlyAmortization=j(e/a),this.extraExpenses=j(n)}}let M=e=>j(.3*e),z=e=>j(.08*e);class D{canWithdraw(e){var t;return void 0==this.lastWithdrawDate||(t=this.lastWithdrawDate,e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())>=24)}shouldHoldForLiquidation(e){let t=j(this.funds+24*this.monthlyPayments);return e>this.funds&&e<t}withdraw(e,t){if(this.canWithdraw(e)&&!this.shouldHoldForLiquidation(t)){this.lastWithdrawDate=e;let a=Math.min(this.funds,t);return this.funds=j(this.funds-a),a}return 0}deposit(){this.funds+=this.monthlyPayments}constructor(e,t){this.lastWithdrawDate=null,this.funds=t,this.monthlyPayments=z(e)}}class _{deposit(){}withdraw(e,t){return 0}}class A{withdraw(e,t){let a=this.monthlyContribution;return 11===e.getMonth()&&(a+=this.annualContribution),j(Math.min(t,a))}constructor(e,t){this.monthlyContribution=e,this.annualContribution=t}}class R{constructor(e,t,a,n,s){this.installmentDate=e,this.savingsWithdrawal=t,this.cashPayment=a,this.bill=n,this.balance=s}}let q=e=>{let{totalValue:t,savingsAccount:a,mortgageTable:n,numberOfMonths:s,contribution:l,initialDate:r}=e,i=t,o=Array(s);for(let e=0;e<s;e++){let t=new Date(r.getTime());t.setMonth(r.getMonth()+e),a.deposit();let s=n.calculate(i);i=f(i,s.amortization);let c=a.withdraw(t,i),m=l.withdraw(t,f(i,c));if(i=f(i,c+m),o[e]=new R(t,c,m,s,i),i<=0)break}return o.filter(e=>void 0!==e)},G=(e,t,a)=>{let{total:n}=a.calculate(e),s=M(t);if(n>s)throw Error("Parcela supera o valor de ".concat(p(s),"."))},k=(e,t)=>{let a=j(e/5);if(t<a)throw Error("Entrada menor que a m\xednima, que \xe9 de ".concat(p(a),"."));return f(e,t)};class O{asCSV(){return{header:"Data,Saque FGTS,Pagamento em dinheiro,Presta\xe7\xe3o,Juros,Amortiza\xe7\xe3o,Saldo devedor\n",body:this.payments.reduce((e,t)=>{let a=t.installmentDate.toLocaleDateString("pt-BR");return"".concat(e).concat(a,",").concat(t.savingsWithdrawal,",").concat(t.cashPayment,",").concat(t.installment,",")+"".concat(t.interest,",").concat(t.amortization,",").concat(t.balance,"\n")},"")}}constructor(e){this.payments=e.map(e=>{let{installmentDate:t,savingsWithdrawal:a,cashPayment:n,bill:s,balance:l}=e;return{installmentDate:t,savingsWithdrawal:a,cashPayment:n,installment:s.total,interest:s.interest,amortization:s.amortization,balance:l}})}}let I=e=>{let{value:t,mortgageType:a,annualInterestRate:n,numberOfMonths:s,extraExpenses:r,grossPay:i,hasFGTS:o,initialFunds:c,monthlyPayments:m,annualPayments:d,downPayment:h}=e,u=k(t,h),x=new(a===l.SAC?E:T)(u,P(n),s,r);return G(u,i,x),new O(q({totalValue:u,savingsAccount:o?new D(i,c):new _,mortgageTable:x,numberOfMonths:s,contribution:new A(m,d),initialDate:N()}))},V={color:"#D8546D"},W=e=>parseFloat("".concat(e)),B=e=>parseInt("".concat(e)),L=e=>"true"==="".concat(e),H=()=>{let[e,t]=(0,h.useState)(null),[a,n]=(0,h.useState)(null);return(0,h.useEffect)(()=>{if(null!=e)try{let t={grossPay:W(e.grossPay),value:W(e.value),hasFGTS:L(e.hasFGTS),monthlyPayments:W(e.monthlyPayments),annualPayments:W(e.annualPayments),mortgageType:B(e.mortgageType),annualInterestRate:W(e.annualInterestRate),numberOfMonths:B(e.numberOfMonths),extraExpenses:W(e.extraExpenses),initialFunds:W(e.initialFunds),downPayment:W(e.downPayment)};console.debug(t),n(I(t))}catch(e){console.error(e)}},[e]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h1",{style:V,children:"Calculadora de Amortiza\xe7\xe3o"}),(0,i.jsx)(x,{submitMortgageParams:t}),(0,i.jsx)(g,{report:a})]})};function J(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d(),{children:[(0,i.jsx)("meta",{charSet:"utf-8"}),(0,i.jsx)("title",{children:"Calculadora de Amortiza\xe7\xe3o"}),(0,i.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsx)("main",{className:"container ".concat(c().className),children:(0,i.jsx)(H,{})})]})}},3465:function(e){e.exports={style:{fontFamily:"'__Inter_e66fe9', '__Inter_Fallback_e66fe9'",fontStyle:"normal"},className:"__className_e66fe9"}},9008:function(e,t,a){e.exports=a(6665)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);